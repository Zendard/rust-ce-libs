extern "C" {
    fn os_SetFlagByte(offset: isize, set: u8);
    fn os_GetFlagByte(offset: isize) -> u8;
    fn os_TestFlagBits(offset_pattern: i16) -> isize;
    fn os_ResetFlagBits(offset_pattern: i16);
    fn os_TestFlagBitsFast(offset_pattern: u16) -> bool;
}

pub enum Flag {
    TrigDegrees = 4,
    KbdScr = 8,
    KbdKeyPress = 16,
    DonePrgm = 32,
    EditOpen = 260,
    AnsScroll = 264,
    PlotLoc = 514,
    PlotDisp = 516,
    GrfModeFunc = 528,
    GrfModePolar = 544,
    GrfModeParam = 576,
    GrfModeRecur = 640,
    GraphDraw = 769,
    GraphCursor = 772,
    GrfDot = 1025,
    GrfSimul = 1026,
    GrfGrid = 1028,
    GrfPolar = 1032,
    GrfNoCoord = 1040,
    GrfNoAxis = 1056,
    GrfLabel = 1088,
    TextEraseBelow = 1282,
    TextScrolled = 1284,
    TextInverse = 1288,
    TextInsMode = 1296,
    Parser2 = 1664,
    Parser2NumOp1 = 1793,
    NewDispfPreclrForMode = 2049,
    NewDispfAllowProgTokens = 2050,
    ApdAble = 2052,
    ApdRunning = 2056,
    ApdWarmStart = 2064,
    OnParseInput = 2306,
    OnRunning = 2312,
    OnInterrupt = 2320,
    StatsValid = 2368,
    FmtExponent = 2561,
    FmtEng = 2562,
    FmtReal = 2592,
    FmtRect = 2624,
    FmtPolar = 2688,
    CursorAble = 3076,
    CursorOn = 3080,
    CursorLock = 3088,
    CmdVirgin = 3104,
    CmdExec = 3136,
    AppWantinterrupt = 3329,
    AppTextSave = 3330,
    AppAutoScroll = 3332,
    AppMenus = 3336,
    AppLockMenus = 3344,
    AppCurGraphic = 3360,
    AppCurWord = 3392,
    AppExit = 3456,
    SeqWebMode = 3841,
    SeqWebVert = 3842,
    SeqUV = 3844,
    SeqVW = 3848,
    SeqUW = 3856,
    PromptEdit = 4354,
    IndicEnable = 4609,
    IndicInUse = 4610,
    Shift2nd = 4616,
    ShiftAlpha = 4624,
    ShiftLowercase = 4640,
    ShiftAlphalock = 4672,
    ShiftKeepAlpha = 4736,
    TableAutoFill = 4880,
    TableAutoCalc = 4896,
    TableRetable = 4928,
    TraceExpression = 6145,
    Stats2 = 67111168,
    Stats2Diagnostics = 6657,
    Stats2Nodel = 6660,
    Graph2 = 2147484416,
    Graph2SplitOverride = 7944,
    Asm1 = 33,
    Asm2 = 34,
    ArchiveCheckBattery = 9217,
    GetsendComFailed = 9218,
    SelftestResetOnPowerOn = 9220,
    LowercaseEnable = 9224,
    ContextNoCxPutAway = 9504,
    StatusbarNobarMode = 10112,
    Api1 = 40,
    Api1AppAllowContext = 10241,
    Api1AppRunning = 10256,
    Api1AppRetKeyOff = 10368,
    Api2 = 41,
    Api3 = 42,
    Api4 = 43,
    Api4CellOverride = 11010,
    Api4FullscrnDraw = 11012,
    Xap0 = 46,
    Xap0Mouse = 11777,
    Xap1 = 47,
    Xap2 = 48,
    Xap3 = 49,
    FontFracDrawlFont = 12804,
    FontFractalLlFont = 12808,
    FontCustomFont = 12928,
    Plot3 = 1152921504606847488,
    Plot3BufferOnly = 15361,
    Plot3UseFastCirc = 15376,
    KeyboardDefaults = 15680,
    SilentlinkActive = 15873,
    ExtrahooksCheckCat2Ver = 15880,
    ExtrahooksOpenLibActive = 15888,
    ClockNotMdyMode = 16129,
    ClockIsYmdMode = 16130,
    ClockIs24Hour = 16132,
    ClockInAfternoon = 16136,
    ClockUseTokensInString = 16144,
    ClockDisplayClock = 16160,
    ClockClockOn = 16192,
    MathprintEnabled = 17440,
    BootmenuDispInitialMenu = 17680,
    BacklightRestore = 17921,
    Graph3 = 0x4A,
    Graph3DrawLabels = 18945,
    PutmapUsePixelShadow2 = 18952,
    PutmapUseColor = 18960,
    GraphdispBackgroundValid = 19216,
}

pub fn set_flag_byte(flag: Flag, value: u8) {
    unsafe {
        os_SetFlagByte(flag as isize, value);
    }
}

pub fn get_flag_byte(flag: Flag) -> u8 {
    unsafe { os_GetFlagByte(flag as isize) }
}
